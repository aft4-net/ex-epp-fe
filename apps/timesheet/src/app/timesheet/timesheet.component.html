<div class="container">
  <app-timesheet-header class="timesheet-header"></app-timesheet-header>

  <app-date-selector [dates10]="firstday1 | date:'MMM d -' " [dates11]="lastday1 | date:'MMM d, y'"
    class="date-selector" (valueChange)='selectedDate($event)' (valueChangeNextWeek)="nextWeek($event)"
    (valueChangeLastWeek)="lastastWeek($event)"></app-date-selector>

  <div class="day-and-date-column">
    <div *ngFor="let myD of weekDays">
      <app-day-and-date-column [dates1]="myD | date:'dd'  " [item]="myD | date:'EEEE' " [date]="myD"
        [timesheet]="timesheet" (dateColumnClicked)="onDateColumnClicked($event)"
        (editButtonClicked)="onEditButtonClicked($event)" (projectNamePaletClicked)="onProjectNamePaletClicked($event)">
      </app-day-and-date-column>
    </div>
  </div>
</div>

<nz-drawer [nzVisible]="drawerVisible" [nzClosable]="false" [nzMask]="false" [nzWidth]="400">
  <div *nzDrawerContent>
    <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()">
      <div class="timesheet-date-range">
        <div class="from-date-to-date">
          <label for="from-date" id="from-date">From Date:</label>
          <nz-date-picker [(ngModel)]="formData.fromDate" formControlName="fromDate"></nz-date-picker>
          <label for="to-date" id="to-date">To Date:</label>
          <nz-date-picker [(ngModel)]="formData.toDate" formControlName="toDate" [nzSize]="'small'"></nz-date-picker>

        </div>
        <i nz-icon nzType="close" nzTheme="outline" (click)="closeFormDrawer()"></i>
      </div>
      <div class="timesheet-detail">
        <label for="client">Client</label>
        <nz-select formControlName="client" [(ngModel)]="formData.client" *ngIf="clients?.length else elseBlock">
          <nz-option ng-selected="client.label == formData.client" *ngFor="let client of clients"
            nzValue="{{ client.id }}" nzLabel="{{ client.name }}"></nz-option>
        </nz-select>

        <label for="project">Project</label>
        <nz-select formControlName="project" [(ngModel)]="formData.project" *ngIf="projects?.length else elseBlock">
          <nz-option ng-selected="project.label == formData.project" *ngFor="let project of projects"
            nzValue="{{ project.id }}" nzLabel="{{ project.name }}"></nz-option>
        </nz-select>

        <ng-template #elseBlock>
          <nz-select nzDisabled>
            <nz-option> </nz-option>
          </nz-select>
        </ng-template>

        <label for="hours">Hours</label>
        <nz-form-item>
          <nz-form-control nzHasFeedback nzValidatingTip="Validating..." [nzErrorTip]="userErrorTpl">
            <input [(ngModel)]="formData.hours" nz-input formControlName="hours" placeholder="" type="number" min="1" max="24" />
            <ng-template #userErrorTpl let-control>
              <ng-container *ngIf="control>=24">Please Enter Below 24</ng-container>
            </ng-template>
          </nz-form-control>
        </nz-form-item>

        <label for="note">Note</label>
        <textarea [(ngModel)]="formData.note" formControlName="note" nz-input rows="4">
                  {{ formData.note }}
                </textarea>
        <div class="save-and-clear">
          <button nz-button [disabled]="!formData.client || !formData.project ||!formData.hours">Save
          </button>
          <button nz-button (click)="resetForm($event)"
            [disabled]="!formData.client && !formData.project &&!formData.hours && !formData.note">Clear
          </button>
        </div>
      </div>
    </form>
  </div>
</nz-drawer>