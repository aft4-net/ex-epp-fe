<div class="container">
    <app-timesheet-header class="timesheet-header"></app-timesheet-header>
    <app-date-selector class="date-selector"></app-date-selector>
    <div class="day-and-date-column">
        <app-day-and-date-column (editButtonClicked)="onEditButtonClicked($event)"
            (dateColumnClicked)="onDateColumnClicked($event)"></app-day-and-date-column>
        <app-day-and-date-column (editButtonClicked)="onEditButtonClicked($event)"
            (dateColumnClicked)="onDateColumnClicked($event)"></app-day-and-date-column>
        <app-day-and-date-column (editButtonClicked)="onEditButtonClicked($event)"
            (dateColumnClicked)="onDateColumnClicked($event)"></app-day-and-date-column>
        <app-day-and-date-column (editButtonClicked)="onEditButtonClicked($event)"
            (dateColumnClicked)="onDateColumnClicked($event)"></app-day-and-date-column>
        <app-day-and-date-column (editButtonClicked)="onEditButtonClicked($event)"
            (dateColumnClicked)="onDateColumnClicked($event)"></app-day-and-date-column>
        <app-day-and-date-column (editButtonClicked)="onEditButtonClicked($event)"
            (dateColumnClicked)="onDateColumnClicked($event)"></app-day-and-date-column>
        <app-day-and-date-column (editButtonClicked)="onEditButtonClicked($event)"
            (dateColumnClicked)="onDateColumnClicked($event)"></app-day-and-date-column>
    </div>
</div>

<nz-drawer [nzVisible]="drawerVisible" [nzClosable]="false" [nzMask]="false" [nzWidth]="400">
    <div *nzDrawerContent>
        <form
            nz-form
            [formGroup]="validateForm"
            (ngSubmit)="submitForm()"
            >
            <div class="timesheet-date-range">
                <div class="from-date-to-date">
                    <label for="from-date" id="from-date">From Date:</label>
                    <nz-date-picker [(ngModel)]="formData.timesheetDate" formControlName="fromDate" ></nz-date-picker>
                    <label for="to-date" id="to-date">To Date:</label>
                    <nz-date-picker formControlName="toDate" [nzSize]="'small'"></nz-date-picker>
                   
                </div>  
                <i nz-icon nzType="close" nzTheme="outline" (click)="closeFormDrawer()"></i>              
            </div>
            <div class="timesheet-detail">
                <label for="client">Client</label>
                <nz-select formControlName="client"
                [(ngModel)]="formData.client"
                >
                    <nz-option
                    ng-selected="client.label == formData.client"
                    *ngFor="let client of clients"
                    nzValue="{{ client.client }}"
                    nzLabel="{{ client.client }}"
                    ></nz-option>
                </nz-select>
                <label for="project">Project</label>
                <nz-select formControlName="project"
                [(ngModel)]="formData.project"
                >
                   <nz-option
                        ng-selected="project.label == formData.project"
                        *ngFor="let project of projects"
                        nzValue="{{ project.project }}"
                        nzLabel="{{ project.project }}"
                    ></nz-option>
                </nz-select>
                <label for="hours">Tasks</label>
                <nz-select name="tasks"
                formControlName="task"
                [(ngModel)]="formData.task"
                >
                <nz-option
                    ng-selected="task.label == formData.task"
                    *ngFor="let task of tasks"
                    nzValue="{{ task.task }}"
                    nzLabel="{{ task.task }}"
                ></nz-option>
                </nz-select>
                
                <label for="hours">Hours</label>
                <nz-form-item>
                    
                    <nz-form-control
                      nzHasFeedback
                      nzValidatingTip="Validating..."
                      [nzErrorTip]="userErrorTpl"
                    >
                    <input
                        [(ngModel)]="formData.hours"
                        nz-input
                        formControlName="hour"
                        placeholder=""
                        
                        type="number"
                        min="1" max="24"
                    />
                      <ng-template #userErrorTpl let-control>
                        <ng-container *ngIf="control>=24">Please Enter Below 24</ng-container>
                      </ng-template>
                    </nz-form-control>
                  </nz-form-item>

                <label for="notes">Notes</label>
                <textarea  
                  [(ngModel)]="formData.notes"
                  formControlName="notes"
                  nz-input rows="4">
                  {{ formData.notes }}
                </textarea>
                <div class="save-and-clear">
                    <button 
                    nz-button
                    [disabled]="!formData.client || !formData.project || !formData.task ||!formData.hours"
                    >Save</button>
                    <button 
                    nz-button
                    nz-button (click)="resetForm()"
                    [disabled]="!formData.client && !formData.project && !formData.task &&!formData.hours && !formData.notes"
                    >Clear</button>
                </div>
            </div>
        </form>
        
    </div>
</nz-drawer>