<div class="breadcrumb">
  <nz-breadcrumb>
    <div nz-row>
      <div nz-col nzSpan="22">
        <nz-breadcrumb-item>Home</nz-breadcrumb-item>
        <nz-breadcrumb-item>Resources</nz-breadcrumb-item> <br />
        <h3>Employees</h3>
        <ng-template #employees>
          <h3>Employees</h3>
        </ng-template>
      </div>

    </div>
  </nz-breadcrumb>
  </div>
<exec-epp-page-title></exec-epp-page-title>
<div nz-row>
  <div nz-col nzSpan="4">
    <exec-epp-side-bar [active]="3"> </exec-epp-side-bar>
  </div>
  <div nz-col nzSpan="20" class="inner-content">
    <div nz-row>
      <div nz-col nzSpan="20">
        <h1>Emergency Contacts</h1>
      </div>
      <div nz-col nzSpan="4">
        <button
          class="addButton"
          *ngIf="(authorize('Create_Employee') || authorize('Update_Employee') || authorize('Employee_Admin'))"
          nz-button
          nzType="primary"
          (click)="addemergencycontact()"
        >
          <span>Add Emergency Contacts</span>
        </button>
      </div>
    </div>
<br/>
    <nz-table
      class="table"
      #rowSelectionTable
      nzShowSizeChanger
      [nzData]="form.allEmergencyContacts"
    >
      <thead>
        <tr class="tr">
          <th>Full Name</th>
          <th>Relationship with Employee</th>
          <th>Contact Numbber</th>
          <th>Location</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of form.allEmergencyContacts; let i = index">
          <td>
            {{
              data.FirstName +
                ' ' +
                data.FatherName +
                ' ' +
                data.GrandFatherName
            }}
          </td>
          <td>{{ data.Relationship }}</td>
          <td>{{ data.PhoneNumber }}</td>
          <td>{{ data.Country }}</td>

          <td>
            <div nz-row>
              <a
                nz-col
                nzSpan="2"
                class="editable-cell"
                [hidden]="editId === data.guid"
                (click)="startEdit(i)"
              >
                <i nz-icon nzType="edit" nzTheme="outline"></i>
            </a>
              &nbsp; &nbsp;
              <a nz-col nzSpan="2"
                 nz-popconfirm (click)="showConfirm(i)"
                  ><i nz-icon nzType="delete" nzTheme="outline"></i
                >
                  </a>
            </div>
          </td>
        </tr>
      </tbody>
    </nz-table>
  </div>
</div>

<nz-modal
  [(nzVisible)]="isVisible"
  [nzTitle]="addbutton + ' Emergency Contacts'"
  [nzWidth]="'60%'"
  [nzFooter]="footer"
  (nzOnCancel)="exitModal()"
  (nzOnOk)="handleOk()"
  class="layer"
  nzMaskClosable="false"
>
  <ng-container *nzModalContent>
    <div>
      <div style="border: 2px solid #d9d9d9; border-radius: 5px">
        <div nz-col nzSpan="24">
          <nz-tabset class="p-2" [nzTabPosition]="'left'">
            <div>
              <nz-tab [nzTitle]="basic" nzSelected>
                <ng-template #basic>
                  <span>
                    <svg
                      class="mr-3"
                      width="20"
                      height="20"
                      viewBox="0 0 20 20"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M18.625 0.625H1.375C0.960156 0.625 0.625 0.960156 0.625 1.375V18.625C0.625 19.0398 0.960156 19.375 1.375 19.375H18.625C19.0398 19.375 19.375 19.0398 19.375 18.625V1.375C19.375 0.960156 19.0398 0.625 18.625 0.625ZM17.6875 17.6875H2.3125V2.3125H17.6875V17.6875ZM9.53125 7.375H13.8438C13.9469 7.375 14.0312 7.29063 14.0312 7.1875V6.0625C14.0312 5.95937 13.9469 5.875 13.8438 5.875H9.53125C9.42813 5.875 9.34375 5.95937 9.34375 6.0625V7.1875C9.34375 7.29063 9.42813 7.375 9.53125 7.375ZM9.53125 10.75H13.8438C13.9469 10.75 14.0312 10.6656 14.0312 10.5625V9.4375C14.0312 9.33438 13.9469 9.25 13.8438 9.25H9.53125C9.42813 9.25 9.34375 9.33438 9.34375 9.4375V10.5625C9.34375 10.6656 9.42813 10.75 9.53125 10.75ZM9.53125 14.125H13.8438C13.9469 14.125 14.0312 14.0406 14.0312 13.9375V12.8125C14.0312 12.7094 13.9469 12.625 13.8438 12.625H9.53125C9.42813 12.625 9.34375 12.7094 9.34375 12.8125V13.9375C9.34375 14.0406 9.42813 14.125 9.53125 14.125ZM5.96875 6.625C5.96875 6.87364 6.06752 7.1121 6.24334 7.28791C6.41915 7.46373 6.65761 7.5625 6.90625 7.5625C7.15489 7.5625 7.39335 7.46373 7.56916 7.28791C7.74498 7.1121 7.84375 6.87364 7.84375 6.625C7.84375 6.37636 7.74498 6.1379 7.56916 5.96209C7.39335 5.78627 7.15489 5.6875 6.90625 5.6875C6.65761 5.6875 6.41915 5.78627 6.24334 5.96209C6.06752 6.1379 5.96875 6.37636 5.96875 6.625ZM5.96875 10C5.96875 10.2486 6.06752 10.4871 6.24334 10.6629C6.41915 10.8387 6.65761 10.9375 6.90625 10.9375C7.15489 10.9375 7.39335 10.8387 7.56916 10.6629C7.74498 10.4871 7.84375 10.2486 7.84375 10C7.84375 9.75136 7.74498 9.5129 7.56916 9.33709C7.39335 9.16127 7.15489 9.0625 6.90625 9.0625C6.65761 9.0625 6.41915 9.16127 6.24334 9.33709C6.06752 9.5129 5.96875 9.75136 5.96875 10ZM5.96875 13.375C5.96875 13.6236 6.06752 13.8621 6.24334 14.0379C6.41915 14.2137 6.65761 14.3125 6.90625 14.3125C7.15489 14.3125 7.39335 14.2137 7.56916 14.0379C7.74498 13.8621 7.84375 13.6236 7.84375 13.375C7.84375 13.1264 7.74498 12.8879 7.56916 12.7121C7.39335 12.5363 7.15489 12.4375 6.90625 12.4375C6.65761 12.4375 6.41915 12.5363 6.24334 12.7121C6.06752 12.8879 5.96875 13.1264 5.96875 13.375Z"
                        fill="#262626"
                      />
                    </svg>
                    Basic Details
                  </span>
                </ng-template>
                <div class="overflow-scroll">
                  <exec-epp-emergency-contact-detail-group></exec-epp-emergency-contact-detail-group>
                </div>
              </nz-tab>
            </div>
            <nz-tab [nzTitle]="address">
              <ng-template #address>
                <span>
                  <svg
                    class="mr-3"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M19.3166 16.4045C18.73 15.8173 18.0445 15.3381 17.2916 14.9888C18.3534 14.1287 19.0307 12.8162 19.0307 11.3443C19.0307 8.74742 16.8651 6.61696 14.2682 6.6568C11.7112 6.69664 9.65101 8.78024 9.65101 11.3443C9.65101 12.8162 10.3307 14.1287 11.3901 14.9888C10.637 15.3379 9.95153 15.8171 9.36507 16.4045C8.08539 17.6865 7.35882 19.3787 7.31195 21.1834C7.31132 21.2084 7.31571 21.2333 7.32485 21.2566C7.334 21.2798 7.34771 21.3011 7.36518 21.319C7.38265 21.3369 7.40354 21.3511 7.4266 21.3608C7.44966 21.3706 7.47443 21.3756 7.49945 21.3755H8.81195C8.91273 21.3755 8.99711 21.2959 8.99945 21.1951C9.04398 19.8357 9.59476 18.563 10.5627 17.5974C11.0581 17.0995 11.6472 16.7047 12.2961 16.4359C12.9451 16.1672 13.6408 16.0298 14.3432 16.0318C15.7705 16.0318 17.1135 16.5873 18.1237 17.5974C19.0893 18.563 19.6401 19.8357 19.6869 21.1951C19.6893 21.2959 19.7737 21.3755 19.8744 21.3755H21.1869C21.212 21.3756 21.2367 21.3706 21.2598 21.3608C21.2829 21.3511 21.3037 21.3369 21.3212 21.319C21.3387 21.3011 21.3524 21.2798 21.3615 21.2566C21.3707 21.2333 21.3751 21.2084 21.3744 21.1834C21.3276 19.3787 20.601 17.6865 19.3166 16.4045ZM14.3432 14.3443C13.5416 14.3443 12.7869 14.0326 12.2221 13.4654C11.9386 13.1842 11.7147 12.8487 11.5637 12.479C11.4127 12.1094 11.3377 11.7131 11.3432 11.3138C11.3502 10.5451 11.6573 9.80211 12.194 9.25133C12.7565 8.67477 13.5088 8.35368 14.3127 8.3443C15.1073 8.33727 15.8784 8.64664 16.4455 9.20211C17.0268 9.77164 17.3455 10.5334 17.3455 11.3443C17.3455 12.1459 17.0338 12.8982 16.4666 13.4654C16.1884 13.745 15.8574 13.9666 15.4929 14.1175C15.1285 14.2684 14.7377 14.3454 14.3432 14.3443ZM8.47211 11.963C8.45101 11.7591 8.43929 11.5529 8.43929 11.3443C8.43929 10.9716 8.47445 10.6084 8.54007 10.2545C8.55648 10.1701 8.51195 10.0834 8.4346 10.0482C8.11585 9.90524 7.82289 9.70836 7.56976 9.45993C7.2715 9.17072 7.03679 8.82252 6.88062 8.43754C6.72444 8.05256 6.65024 7.63925 6.66273 7.22399C6.68382 6.47164 6.98617 5.7568 7.51351 5.21774C8.09242 4.62477 8.87054 4.30133 9.69789 4.31071C10.4455 4.31774 11.1674 4.60602 11.7135 5.11696C11.8987 5.29039 12.058 5.48258 12.1916 5.68883C12.2385 5.76149 12.3299 5.79196 12.4096 5.76383C12.8221 5.62086 13.258 5.52008 13.7057 5.47321C13.8369 5.45914 13.9119 5.31852 13.8534 5.20133C13.0916 3.6943 11.5354 2.65367 9.73539 2.62555C7.13617 2.58571 4.97054 4.71617 4.97054 7.31071C4.97054 8.78258 5.64789 10.0951 6.7096 10.9552C5.96429 11.2998 5.27757 11.7755 4.68226 12.3709C3.39789 13.6529 2.67132 15.3451 2.62445 17.1521C2.62382 17.1771 2.62821 17.202 2.63735 17.2253C2.64649 17.2486 2.66021 17.2698 2.67768 17.2877C2.69515 17.3056 2.71604 17.3199 2.7391 17.3296C2.76216 17.3393 2.78693 17.3443 2.81195 17.3443H4.12679C4.22757 17.3443 4.31195 17.2646 4.31429 17.1638C4.35882 15.8045 4.9096 14.5318 5.87757 13.5662C6.56664 12.8771 7.41039 12.399 8.33148 12.167C8.42289 12.1435 8.48382 12.0568 8.47211 11.963V11.963Z"
                      fill="#262626"
                    />
                  </svg>
                  Address
                </span>
              </ng-template>
              <div class="overflow-scroll">
                <exec-epp-emergency-address-detail-group></exec-epp-emergency-address-detail-group>
              </div>
            </nz-tab>
          </nz-tabset>
        </div>
      </div>
      <br />
      <button
        nz-button
        class="addeButton"
        (click)="add()"
        [disabled]="
          !this.form.emergencyContact.valid || !this.form.emergencyAddress.valid
        "
        [title]="
          form.emergencyContact.invalid
            ? 'Enter valid contact detail.'
            : ''
            ? ''
            : form.emergencyAddress.invalid
            ? 'Enter valid address detail.'
            : ''
        "
      >
        {{ addbutton }}
      </button>
      &nbsp;
      <button nz-button class="cancelButton" (click)="resetForm()">
        Clear
      </button>
    </div>
  </ng-container>
</nz-modal>
